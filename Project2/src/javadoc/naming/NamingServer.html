<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Mon Feb 27 00:22:33 EST 2012 -->
<TITLE>
NamingServer
</TITLE>

<META NAME="date" CONTENT="2012-02-27">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="NamingServer";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../naming/NamingStubs.html" title="class in naming"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?naming/NamingServer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="NamingServer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
naming</FONT>
<BR>
Class NamingServer</H2>
<PRE>
<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>naming.NamingServer</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../naming/Registration.html" title="interface in naming">Registration</A>, <A HREF="../naming/Service.html" title="interface in naming">Service</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>NamingServer</B><DT>extends <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><DT>implements <A HREF="../naming/Service.html" title="interface in naming">Service</A>, <A HREF="../naming/Registration.html" title="interface in naming">Registration</A></DL>
</PRE>

<P>
Naming server.

    <p>
    Each instance of the filesystem is centered on a single naming server. The
    naming server maintains the filesystem directory tree. It does not store any
    file data - this is done by separate storage servers. The primary purpose of
    the naming server is to map each file name (path) to the storage server
    which hosts the file's contents.

    <p>
    The naming server provides two interfaces, <code>Service</code> and
    <code>Registration</code>, which are accessible through RMI. Storage servers
    use the <code>Registration</code> interface to inform the naming server of
    their existence. Clients use the <code>Service</code> interface to perform
    most filesystem operations. The documentation accompanying these interfaces
    provides details on the methods supported.

    <p>
    Stubs for accessing the naming server must typically be created by directly
    specifying the remote network address. To make this possible, the client and
    registration interfaces are available at well-known ports defined in
    <code>NamingStubs</code>.

    <p>
    This version of the naming server supports file locking and file
    replication.

    <p>
    The majority of the naming server logic is implemented in this class.
    Additional logic related to replication and invalidation is implemented in
    <code>FileNode</code>.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../naming/NamingServer.html#NamingServer()">NamingServer</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates the naming server object.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#createDirectory(common.Path)">createDirectory</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;directory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates the given directory, if it does not exist.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#createFile(common.Path)">createFile</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;file)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates the given file, if it does not exist.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#delete(common.Path)">delete</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes a file or directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../storage/Storage.html" title="interface in storage">Storage</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#getStorage(common.Path)">getStorage</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;file)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a stub for the storage server hosting a file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#isDirectory(common.Path)">isDirectory</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines whether a path refers to a directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#list(common.Path)">list</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;directory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lists the contents of a directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#lock(common.Path, boolean)">lock</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path,
     boolean&nbsp;exclusive)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Locks a file or directory for either shared or exclusive access.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../common/Path.html" title="class in common">Path</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#register(storage.Storage, storage.Command, common.Path[])">register</A></B>(<A HREF="../storage/Storage.html" title="interface in storage">Storage</A>&nbsp;client_stub,
         <A HREF="../storage/Command.html" title="interface in storage">Command</A>&nbsp;command_stub,
         <A HREF="../common/Path.html" title="class in common">Path</A>[]&nbsp;files)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers a storage server with the naming server.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#start()">start</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starts the naming server.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#stop()">stop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stops the naming server.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#stopped(java.lang.Throwable)">stopped</A></B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</A>&nbsp;cause)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Indicates that the server has completely shut down.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../naming/NamingServer.html#unlock(common.Path, boolean)">unlock</A></B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path,
       boolean&nbsp;exclusive)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unlocks a file or directory.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="NamingServer()"><!-- --></A><H3>
NamingServer</H3>
<PRE>
public <B>NamingServer</B>()</PRE>
<DL>
<DD>Creates the naming server object.

        <p>
        The naming server is not started.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="start()"><!-- --></A><H3>
start</H3>
<PRE>
public void <B>start</B>()
           throws <A HREF="../rmi/RMIException.html" title="class in rmi">RMIException</A></PRE>
<DL>
<DD>Starts the naming server.

        <p>
        After this method is called, it is possible to access the client and
        registration interfaces of the naming server remotely.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../rmi/RMIException.html" title="class in rmi">RMIException</A></CODE> - If either of the two skeletons, for the client or
                             registration server interfaces, could not be
                             started. The user should not attempt to start the
                             server again if an exception occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="stop()"><!-- --></A><H3>
stop</H3>
<PRE>
public void <B>stop</B>()</PRE>
<DL>
<DD>Stops the naming server.

        <p>
        This method waits for both the client and registration interface
        skeletons to stop. It attempts to interrupt as many of the threads that
        are executing naming server code as possible. After this method is
        called, the naming server is no longer accessible remotely. The naming
        server should not be restarted.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="stopped(java.lang.Throwable)"><!-- --></A><H3>
stopped</H3>
<PRE>
protected void <B>stopped</B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</A>&nbsp;cause)</PRE>
<DL>
<DD>Indicates that the server has completely shut down.

        <p>
        This method should be overridden for error reporting and application
        exit purposes. The default implementation does nothing.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cause</CODE> - The cause for the shutdown, or <code>null</code> if the
                     shutdown was by explicit user request.</DL>
</DD>
</DL>
<HR>

<A NAME="lock(common.Path, boolean)"><!-- --></A><H3>
lock</H3>
<PRE>
public void <B>lock</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path,
                 boolean&nbsp;exclusive)
          throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#lock(common.Path, boolean)">Service</A></CODE></B></DD>
<DD>Locks a file or directory for either shared or exclusive access.

        <p>
        An object locked for <em>exclusive</em> access cannot be locked by any
        other user until the exclusive lock is released. An object should be
        locked for exclusive access when operations performed by the user will
        change the object's state.

        <p>
        An object locked for <em>shared</em> access can be locked by other users
        for shared access at the same time, but cannot be simultaneously locked
        by users requesting exclusive access. This kind of lock should be
        obtained when the object's state will be consulted, but not modified,
        and to prevent the object from being modified by another user.

        <p>
        Wherever there is a requirement that an object be locked for shared
        access, it is acceptable to lock the object for exclusive access
        instead: exclusive access is more "safe" than shared access. However, it
        is best to avoid this unless absolutely necessary, to permit as many
        users simultaneous access to the object as safely possible.

        <p>
        Locking a file for shared access is considered by the naming server to
        be a read request, and may cause the file to be replicated. Locking a
        file for exclusive access is considered to be a write request, and
        causes all copies of the file but one to be deleted. This latter process
        is called invalidation. The naming server must treat lock actions as
        read or write requests because it cannot monitor the true read and write
        requests - those go to the storage servers.

        <p>
        When any object is locked for either kind of access, all objects along
        the path up to, but not including, the object itself, are locked for
        shared access to prevent their modification or deletion by other users.
        For example, if one user locks <code>/etc/scripts/startup.sh</code> for
        exclusive access in order to write to it, then <code>/</code>,
        <code>/etc</code>, <code>/etc/scripts</code> will all be locked for
        shared access to prevent other users from, say, deleting them.

        <p>
        An object can be considered to be <em>effectively locked</em> for
        exclusive access if one of the directories on the path to it is already
        locked for exclusive access: this is because no user will be able to
        obtain any kind of lock on the object until the exclusive lock on the
        directory is released. This is a direct consequence of the locking order
        described in the previous paragraph. As a result, if a directory is
        locked for exclusive access, the entire subtree under that directory can
        also be considered to be locked for exclusive access. If a client takes
        advantage of this fact to lock a directory and then perform several
        accesses to the files under it, it should take care not to access files
        for writing: this may cause the naming server to miss true write
        requests to those files, and cause the naming server to fail to request
        that stale copies of the file be invalidated.

        <p>
        A minimal amount of fairness is guaranteed with locking: users are
        served in first-come first-serve order, with a slight modification:
        users requesting shared access are granted the lock simultaneously. As a
        consequence of the lock service order, if at least one exclusive user
        is already waiting for the lock, subsequent users requesting shared
        access must wait until that user has released the lock - even if the
        lock is currently taken for shared access. For example, suppose users
        <code>A</code> and <code>B</code> both currently hold the lock with
        shared access. User <code>C</code> arrives and requests exclusive
        access. User <code>C</code> is then placed in a queue. If another user,
        <code>D</code>, arrives and requests shared access, he is not permitted
        to take the lock immediately, even though it is currently taken by
        <code>A</code> and <code>B</code> for shared access. User <code>D</code>
        must wait until <code>C</code> is done with the lock.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#lock(common.Path, boolean)">lock</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - The file or directory to be locked.<DD><CODE>exclusive</CODE> - If <code>true</code>, the object is to be locked for
                         exclusive access. Otherwise, it is to be locked for
                         shared access.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></CODE> - If the object specified by
                                      <code>path</code> cannot be found.</DL>
</DD>
</DL>
<HR>

<A NAME="unlock(common.Path, boolean)"><!-- --></A><H3>
unlock</H3>
<PRE>
public void <B>unlock</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path,
                   boolean&nbsp;exclusive)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#unlock(common.Path, boolean)">Service</A></CODE></B></DD>
<DD>Unlocks a file or directory.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#unlock(common.Path, boolean)">unlock</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - The file or directory to be unlocked.<DD><CODE>exclusive</CODE> - Must be <code>true</code> if the object was locked for
                         exclusive access, and <code>false</code> if it was
                         locked for shared access.</DL>
</DD>
</DL>
<HR>

<A NAME="isDirectory(common.Path)"><!-- --></A><H3>
isDirectory</H3>
<PRE>
public boolean <B>isDirectory</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path)
                    throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#isDirectory(common.Path)">Service</A></CODE></B></DD>
<DD>Determines whether a path refers to a directory.

        <p>
        The parent directory should be locked for shared access before this
        operation is performed. This is to prevent the object in question from
        being deleted or re-created while this call is in progress.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#isDirectory(common.Path)">isDirectory</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - The object to be checked.
<DT><B>Returns:</B><DD><code>true</code> if the object is a directory,
                <code>false</code> if it is a file.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></CODE> - If the object specified by
                                      <code>path</code> cannot be found.</DL>
</DD>
</DL>
<HR>

<A NAME="list(common.Path)"><!-- --></A><H3>
list</H3>
<PRE>
public <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>[] <B>list</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;directory)
              throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#list(common.Path)">Service</A></CODE></B></DD>
<DD>Lists the contents of a directory.

        <p>
        The directory should be locked for shared access before this operation
        is performed, because this operation reads the directory's child list.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#list(common.Path)">list</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>directory</CODE> - The directory to be listed.
<DT><B>Returns:</B><DD>An array of the directory entries. The entries are not
                guaranteed to be in any particular order.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></CODE> - If the given path does not refer to a
                                      directory.</DL>
</DD>
</DL>
<HR>

<A NAME="createFile(common.Path)"><!-- --></A><H3>
createFile</H3>
<PRE>
public boolean <B>createFile</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;file)
                   throws <A HREF="../rmi/RMIException.html" title="class in rmi">RMIException</A>,
                          <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#createFile(common.Path)">Service</A></CODE></B></DD>
<DD>Creates the given file, if it does not exist.

        <p>
        The parent directory should be locked for exclusive access before this
        operation is performed.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#createFile(common.Path)">createFile</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>file</CODE> - Path at which the file is to be created.
<DT><B>Returns:</B><DD><code>true</code> if the file is created successfully,
                <code>false</code> otherwise. The file is not created if a file
                or directory with the given name already exists.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../rmi/RMIException.html" title="class in rmi">RMIException</A></CODE> - If the call cannot be completed due to a network
                             error.
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></CODE> - If the parent directory does not exist.</DL>
</DD>
</DL>
<HR>

<A NAME="createDirectory(common.Path)"><!-- --></A><H3>
createDirectory</H3>
<PRE>
public boolean <B>createDirectory</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;directory)
                        throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#createDirectory(common.Path)">Service</A></CODE></B></DD>
<DD>Creates the given directory, if it does not exist.

        <p>
        The parent directory should be locked for exclusive access before this
        operation is performed.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#createDirectory(common.Path)">createDirectory</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>directory</CODE> - Path at which the directory is to be created.
<DT><B>Returns:</B><DD><code>true</code> if the directory is created successfully,
                <code>false</code> otherwise. The directory is not created if
                a file or directory with the given name already exists.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></CODE> - If the parent directory does not exist.</DL>
</DD>
</DL>
<HR>

<A NAME="delete(common.Path)"><!-- --></A><H3>
delete</H3>
<PRE>
public boolean <B>delete</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;path)
               throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#delete(common.Path)">Service</A></CODE></B></DD>
<DD>Deletes a file or directory.

        <p>
        The parent directory should be locked for exclusive access before this
        operation is performed.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#delete(common.Path)">delete</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - Path to the file or directory to be deleted.
<DT><B>Returns:</B><DD><code>true</code> if the file or directory is deleted;
                <code>false</code> otherwise. The root directory cannot be
                deleted.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></CODE> - If the object or parent directory does not
                                      exist.</DL>
</DD>
</DL>
<HR>

<A NAME="getStorage(common.Path)"><!-- --></A><H3>
getStorage</H3>
<PRE>
public <A HREF="../storage/Storage.html" title="interface in storage">Storage</A> <B>getStorage</B>(<A HREF="../common/Path.html" title="class in common">Path</A>&nbsp;file)
                   throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Service.html#getStorage(common.Path)">Service</A></CODE></B></DD>
<DD>Returns a stub for the storage server hosting a file.

        <p>
        If the client intends to perform calls only to <code>read</code> or
        <code>size</code> after obtaining the storage server stub, it should
        lock the file for shared access before making this call. If it intends
        to perform calls to <code>write</code>, it should lock the file for
        exclusive access.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Service.html#getStorage(common.Path)">getStorage</A></CODE> in interface <CODE><A HREF="../naming/Service.html" title="interface in naming">Service</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>file</CODE> - Path to the file.
<DT><B>Returns:</B><DD>A stub for communicating with the storage server.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</A></CODE> - If the file does not exist.</DL>
</DD>
</DL>
<HR>

<A NAME="register(storage.Storage, storage.Command, common.Path[])"><!-- --></A><H3>
register</H3>
<PRE>
public <A HREF="../common/Path.html" title="class in common">Path</A>[] <B>register</B>(<A HREF="../storage/Storage.html" title="interface in storage">Storage</A>&nbsp;client_stub,
                       <A HREF="../storage/Command.html" title="interface in storage">Command</A>&nbsp;command_stub,
                       <A HREF="../common/Path.html" title="class in common">Path</A>[]&nbsp;files)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../naming/Registration.html#register(storage.Storage, storage.Command, common.Path[])">Registration</A></CODE></B></DD>
<DD>Registers a storage server with the naming server.

        <p>
        The storage server notifies the naming server of the files that it is
        hosting. Note that the storage server does not notify the naming server
        of any directories. The naming server attempts to add as many of these
        files as possible to its directory tree. The naming server then replies
        to the storage server with a subset of these files that the storage
        server must delete from its local storage.

        <p>
        After the storage server has deleted the files as commanded, it must
        prune its directory tree by removing all directories under which no
        files can be found. This includes, for example, directories which
        contain only empty directories.

        <p>
        Registration requries the naming server to lock the root directory for
        exclusive access. Therefore, it is best done when there is not heavy
        usage of the filesystem.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../naming/Registration.html#register(storage.Storage, storage.Command, common.Path[])">register</A></CODE> in interface <CODE><A HREF="../naming/Registration.html" title="interface in naming">Registration</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>client_stub</CODE> - Storage server client service stub. This will be
                           given to clients when operations need to be performed
                           on a file on the storage server.<DD><CODE>command_stub</CODE> - Storage server command service stub. This will be
                            used by the naming server to issue commands that
                            modify the directory tree on the storage server.<DD><CODE>files</CODE> - The list of files stored on the storage server. This list
                     is merged with the directory tree already present on the
                     naming server. Duplicate filenames are dropped.
<DT><B>Returns:</B><DD>A list of duplicate files to delete on the local storage of the
                registering storage server.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../naming/NamingStubs.html" title="class in naming"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?naming/NamingServer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="NamingServer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
